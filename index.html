<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>百年变局：1840-1949 华夏生存战</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Cinzel:wght@700&display=swap');

        :root {
            --bg-color: #f0ebe5; /* 米色宣纸感 */
            --ink-color: #2c3e50; /* 墨色 */
            --red-color: #c0392b; /* 中国红 */
            --accent-gold: #d4ac0d; /* 岁月金 */
            --text-main: #1a1a1a;
            --text-sub: #555;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: 'Noto Serif SC', serif;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* 电影容器 */
        #cinema-container {
            width: 100%;
            max-width: 1200px;
            aspect-ratio: 16/9;
            background-color: var(--bg-color);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* 胶片噪点层 */
        .film-grain {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 90;
            opacity: 0.15;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* 上下遮幅 (Cinematic Bars) */
        .letterbox {
            position: absolute;
            left: 0;
            width: 100%;
            height: 10%;
            background: #000;
            z-index: 100;
        }
        .letterbox.top { top: 0; }
        .letterbox.bottom { bottom: 0; }

        /* 场景层 */
        #stage {
            position: absolute;
            top: 10%;
            left: 0;
            width: 100%;
            height: 80%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        /* 年份显示 */
        #year-display {
            position: absolute;
            top: 12%;
            right: 5%;
            font-family: 'Cinzel', serif;
            font-size: 4vw;
            color: rgba(44, 62, 80, 0.2);
            font-weight: bold;
            z-index: 5;
            transition: all 1s ease;
        }

        /* 字幕容器 */
        #subtitle-container {
            position: absolute;
            bottom: 12%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 80%;
            z-index: 101; /* Above letterbox visually if needed, but usually on black bar */
        }

        .subtitle-cn {
            color: #fff;
            font-size: 1.8vw;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            margin-bottom: 0.5vh;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.8s ease;
        }

        .subtitle-en {
            color: #ccc;
            font-size: 0.9vw;
            font-weight: 400;
            font-family: sans-serif;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.8s ease 0.2s;
        }

        .subtitle-active {
            opacity: 1;
            transform: translateY(0);
        }

        /* ===== 场景元素通用 ===== */
        .scene {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .scene.active {
            opacity: 1;
        }

        /* --- 场景1：1840 破门 --- */
        .ship-group {
            position: absolute;
            left: -30%;
            bottom: 20%;
            width: 30%;
            opacity: 0.8;
        }
        
        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 20%;
            background: rgba(44, 62, 80, 0.1);
            animation: waveFlow 4s linear infinite;
        }

        .ancient-door {
            position: absolute;
            right: 20%;
            height: 60%;
            width: 5px;
            background: var(--ink-color);
            transform-origin: bottom center;
        }
        
        /* --- 场景2：破碎 --- */
        .china-map {
            width: 40%;
            height: auto;
            fill: var(--ink-color);
            opacity: 0.8;
            transform-origin: center;
        }
        
        .crack-line {
            stroke: var(--bg-color);
            stroke-width: 2;
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
        }

        /* --- 场景3：惊雷 --- */
        .crown {
            width: 15%;
            fill: var(--accent-gold);
            position: absolute;
            top: 30%;
        }
        
        .scissor-cut {
            position: absolute;
            width: 100%;
            height: 2px;
            background: var(--red-color);
            transform: scaleX(0);
        }

        /* --- 场景4：抗争 --- */
        .smoke {
            position: absolute;
            border-radius: 50%;
            background: #555;
            filter: blur(20px);
            opacity: 0;
        }

        .wall-bricks {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30%;
            background: repeating-linear-gradient(45deg, #333, #333 10px, #444 10px, #444 20px);
            transform: translateY(100%);
        }

        /* --- 场景5：新生 --- */
        .sun {
            width: 15vw;
            height: 15vw;
            background: var(--red-color);
            border-radius: 50%;
            position: absolute;
            bottom: -20%;
            box-shadow: 0 0 60px var(--red-color);
        }
        
        .star {
            fill: #ffde00;
            opacity: 0;
        }

        /* 动画关键帧 */
        @keyframes waveFlow {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        @keyframes shipMove {
            0% { transform: translateX(0) scale(1); }
            100% { transform: translateX(250%) scale(1.1); }
        }
        
        @keyframes doorFall {
            0% { transform: rotate(0deg); opacity: 1; }
            40% { transform: rotate(-5deg); opacity: 1; }
            100% { transform: rotate(90deg); opacity: 0; }
        }

        @keyframes mapShake {
            0%, 100% { transform: rotate(0); }
            25% { transform: rotate(2deg); }
            75% { transform: rotate(-2deg); }
        }

        @keyframes crackOpen {
            to { stroke-dashoffset: 0; }
        }

        @keyframes crownFall {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(200px) rotate(45deg); opacity: 0; }
        }

        @keyframes flashRed {
            0%, 100% { background-color: var(--bg-color); }
            50% { background-color: #333; }
        }
        
        @keyframes sunRise {
            to { bottom: 20%; }
        }

    </style>
</head>
<body>

    <div id="cinema-container">
        <!-- 胶片噪点 -->
        <div class="film-grain"></div>
        
        <!-- 遮幅 -->
        <div class="letterbox top"></div>
        <div class="letterbox bottom"></div>

        <!-- 年份指示器 -->
        <div id="year-display">1840</div>

        <!-- 舞台 -->
        <div id="stage">
            <!-- 场景 1: 1840 坚船利炮 -->
            <div class="scene" id="scene-1">
                <div class="wave"></div>
                <!-- 抽象的战船SVG -->
                <svg class="ship-group" viewBox="0 0 200 100" style="animation: shipMove 8s ease-out forwards;">
                    <path d="M20,60 L180,60 L160,90 L40,90 Z" fill="#2c3e50" />
                    <rect x="80" y="20" width="10" height="40" fill="#2c3e50" />
                    <rect x="120" y="30" width="10" height="30" fill="#2c3e50" />
                    <path d="M85,25 L110,35 L85,45 Z" fill="#34495e" /> <!-- 帆/烟 -->
                    <circle cx="50" cy="75" r="3" fill="#fff" />
                    <circle cx="80" cy="75" r="3" fill="#fff" />
                    <circle cx="110" cy="75" r="3" fill="#fff" />
                </svg>
                <!-- 古老的门 -->
                <div class="ancient-door" id="door-visual" style="border-left: 10px solid #555;"></div>
            </div>

            <!-- 场景 2: 1860-1900 山河破碎 -->
            <div class="scene" id="scene-2">
                <!-- 抽象中国地图 SVG -->
                <svg class="china-map" viewBox="0 0 200 150" id="map-visual">
                    <path d="M40,40 Q80,10 120,30 T180,60 Q170,100 130,120 T60,110 Q20,80 40,40 Z" fill="#2c3e50" />
                    <!-- 裂痕 -->
                    <path class="crack-line" d="M120,30 L100,80 L140,100" fill="none" />
                    <path class="crack-line" d="M60,110 L90,80" fill="none" />
                </svg>
            </div>

            <!-- 场景 3: 1911 帝制终结 -->
            <div class="scene" id="scene-3">
                <svg class="crown" viewBox="0 0 100 80" id="crown-visual">
                    <path d="M10,70 L90,70 L80,20 L50,50 L20,20 Z" fill="#d4ac0d" />
                    <circle cx="20" cy="20" r="5" fill="#c0392b" />
                    <circle cx="80" cy="20" r="5" fill="#c0392b" />
                    <circle cx="50" cy="50" r="5" fill="#c0392b" />
                </svg>
                <div class="scissor-cut" id="cut-visual"></div>
            </div>

            <!-- 场景 4: 1937-1945 血肉长城 -->
            <div class="scene" id="scene-4" style="background-color: #1a1a1a;">
                <div class="smoke" style="top: 20%; left: 30%; width: 100px; height: 100px; animation: smokeRise 3s infinite;"></div>
                <div class="smoke" style="top: 40%; left: 60%; width: 150px; height: 150px; animation: smokeRise 4s infinite 1s;"></div>
                <div class="wall-bricks" id="wall-visual"></div>
                <!-- 红色光芒闪烁代表战火 -->
                <div style="position:absolute; width:100%; height:100%; animation: flashRed 0.5s infinite alternate; opacity: 0.2;"></div>
            </div>

            <!-- 场景 5: 1949 旭日东升 -->
            <div class="scene" id="scene-5">
                <div class="sun" id="sun-visual"></div>
                <svg style="position:absolute; top:30%; width: 15%; z-index: 20;" viewBox="0 0 100 100">
                    <polygon class="star" points="50,10 61,40 95,40 67,60 78,90 50,70 22,90 33,60 5,40 39,40" style="transition: opacity 2s ease 1s;" id="star-visual"/>
                </svg>
            </div>
        </div>

        <!-- 字幕 -->
        <div id="subtitle-container">
            <div class="subtitle-cn" id="sub-cn"></div>
            <div class="subtitle-en" id="sub-en"></div>
        </div>
    </div>

    <script>
        // 数据配置
        const timelineData = [
            {
                year: "1840",
                duration: 6000,
                sceneId: "scene-1",
                textCN: "1840年，古老的帝国大门被坚船利炮轰开。",
                textEN: "In 1840, the gates of the ancient empire were blasted open by gunboats.",
                action: () => {
                    // 门倒塌动画
                    setTimeout(() => {
                        document.getElementById('door-visual').style.animation = "doorFall 3s ease-in forwards";
                    }, 2000);
                }
            },
            {
                year: "1860-1900",
                duration: 6000,
                sceneId: "scene-2",
                textCN: "山河破碎，列强瓜分，华夏大地陷入深渊。",
                textEN: "The land shattered, carved up by powers, sinking into the abyss.",
                action: () => {
                    // 地图震动与裂开
                    const map = document.getElementById('map-visual');
                    map.style.animation = "mapShake 0.5s ease-in-out infinite";
                    const cracks = document.querySelectorAll('.crack-line');
                    cracks.forEach(c => c.style.animation = "crackOpen 3s ease-out forwards");
                }
            },
            {
                year: "1911",
                duration: 5000,
                sceneId: "scene-3",
                textCN: "1911年，辛亥革命一声枪响，两千年帝制终结。",
                textEN: "1911, the Xinhai Revolution ended two thousand years of imperial rule.",
                action: () => {
                    // 皇冠掉落
                    document.getElementById('cut-visual').style.transition = "transform 0.2s ease-out";
                    document.getElementById('cut-visual').style.transform = "scaleX(1)";
                    setTimeout(() => {
                        document.getElementById('cut-visual').style.opacity = "0";
                        document.getElementById('crown-visual').style.animation = "crownFall 2s ease-in forwards";
                    }, 300);
                }
            },
            {
                year: "1937-1945",
                duration: 6000,
                sceneId: "scene-4",
                textCN: "至暗时刻，四万万同胞共赴国难，以血肉筑成长城。",
                textEN: "In the darkest hour, 400 million united to build a Great Wall of flesh and blood.",
                action: () => {
                    // 长城升起
                    document.getElementById('wall-visual').style.transition = "transform 4s ease-out";
                    document.getElementById('wall-visual').style.transform = "translateY(0)";
                }
            },
            {
                year: "1949",
                duration: 8000,
                sceneId: "scene-5",
                textCN: "1949年，旭日东升，中国人民站起来了！",
                textEN: "1949, the sun rises. The Chinese people have stood up!",
                action: () => {
                    // 旭日东升
                    document.getElementById('sun-visual').style.animation = "sunRise 4s ease-out forwards";
                    document.getElementById('star-visual').style.opacity = "1";
                    // 烟花效果模拟 (简单变色)
                    document.getElementById('cinema-container').style.transition = "background-color 3s";
                    document.getElementById('cinema-container').style.backgroundColor = "#e74c3c"; // 变成喜庆的红底
                    setTimeout(()=>{
                         document.getElementById('cinema-container').style.backgroundColor = "#f0ebe5"; 
                    }, 500);
                }
            }
        ];

        let currentIndex = 0;

        function playScene(index) {
            if (index >= timelineData.length) {
                // 循环播放或结束
                // 这里选择停留在最后一帧，或者显示结束语
                return; 
            }

            const data = timelineData[index];
            
            // 1. 更新年份
            const yearDisplay = document.getElementById('year-display');
            yearDisplay.style.opacity = 0;
            setTimeout(() => {
                yearDisplay.innerText = data.year;
                yearDisplay.style.opacity = 1;
                // 年份颜色根据场景调整（战火场景用浅色，其他用深色）
                if(index === 3) yearDisplay.style.color = "rgba(255,255,255,0.3)";
                else yearDisplay.style.color = "rgba(44, 62, 80, 0.2)";
            }, 500);

            // 2. 切换场景可见性
            document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
            const currentScene = document.getElementById(data.sceneId);
            currentScene.classList.add('active');

            // 3. 执行场景特有动画
            if (data.action) data.action();

            // 4. 更新字幕
            const subCN = document.getElementById('sub-cn');
            const subEN = document.getElementById('sub-en');
            
            subCN.classList.remove('subtitle-active');
            subEN.classList.remove('subtitle-active');

            setTimeout(() => {
                subCN.innerText = data.textCN;
                subEN.innerText = data.textEN;
                subCN.classList.add('subtitle-active');
                subEN.classList.add('subtitle-active');
            }, 500);

            // 5. 调度下一场
            setTimeout(() => {
                playScene(index + 1);
            }, data.duration);
        }

        // 初始化
        window.onload = () => {
            // 给一点缓冲时间
            setTimeout(() => {
                playScene(0);
            }, 1000);
        };

    </script>
</body>
</html>
